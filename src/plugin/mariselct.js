















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































import config from '../../config.cjs';
import axios from 'axios';

const cricketScore = async (m, Matrix) => {
  const prefix = config.PREFIX;
  const cmd = m.body.startsWith(prefix)
    ? m.body.slice(prefix.length).split(' ')[0].toLowerCase()
    : '';
  const text = m.body.slice(prefix.length + cmd.length).trim();

  const validCommands = ['score', 'crick', 'crickterscore', 'cricket'];

  if (validCommands.includes(cmd)) {
    if (!text) {
      await m.React("❌");
      return m.reply(`*🏏 Please provide a match ID for the cricket score.*\n\n📌 *Example:* ${prefix}cricketscore 12345`);
    }

    const matchId = encodeURIComponent(text);

    try {
      const apiUrl = `https://iol.apinepdev.workers.dev/${matchId}`;
      const response = await axios.get(apiUrl);

      if (!response.status === 200) {
        await m.React("❌");
        return m.reply(`Invalid response from the cricket score API. Status code: ${response.status}`);
      }

      const result = response.data;

      // Decorative Borders and Styled Output
      let formattedResult = `╭━─━─━─━─━─━─━─━─━─━╮\n`;
      formattedResult += `┃ 🌟   *SAMSUNG_MD*   🌟 ┃\n`;
      formattedResult += `┃ 📺 *LIVE MATCH SCORE* ┃\n`;
      formattedResult += `╰━─━─━─━─━─━─━─━─━─━╯\n\n`;

      if (result.code === 200) {
        formattedResult += `📌 *Match Title:*  
        🔹 ${result.data.title}\n\n`;
        formattedResult += `📌 *Latest Update:*  
        🔹 ${result.data.update}\n\n`;
      } else {
        await m.reply(`*⚠️ Update:* No data found for the specified match ID.`);
        await m.React("❌");
        return;
      }

      if (result.data.liveScore && result.data.liveScore.toLowerCase() !== "data not found") {
        formattedResult += `🏏 *Live Score:*  
        🔹 ${result.data.liveScore}\n\n`;
        formattedResult += `📊 *Run Rate:*  
        🔹 ${result.data.runRate}\n\n`;

        // Batsmen Details
        formattedResult += `🏏 *Batsmen at Crease:*\n`;
        formattedResult += `   🏌️ *${result.data.batsmanOne}*  
           ➤ ${result.data.batsmanOneRun} runs (${result.data.batsmanOneBall} balls)  
           ➤ *SR:* ${result.data.batsmanOneSR}\n`;
        formattedResult += `   🏌️ *${result.data.batsmanTwo}*  
           ➤ ${result.data.batsmanTwoRun} runs (${result.data.batsmanTwoBall} balls)  
           ➤ *SR:* ${result.data.batsmanTwoSR}\n\n`;

        // Bowlers Details
        formattedResult += `🎯 *Bowler in Action:*\n`;
        formattedResult += `   🎳 *${result.data.bowlerOne}*  
           ➤ ${result.data.bowlerOneOver} overs, ${result.data.bowlerOneRun} runs, ${result.data.bowlerOneWickets} wickets  
           ➤ *Economy:* ${result.data.bowlerOneEconomy}\n`;
        formattedResult += `   🎳 *${result.data.bowlerTwo}*  
           ➤ ${result.data.bowlerTwoOver} overs, ${result.data.bowlerTwoRun} runs, ${result.data.bowlerTwoWicket} wickets  
           ➤ *Economy:* ${result.data.bowlerTwoEconomy}\n`;
      }

      // Footer
      formattedResult += `\n╭━─━─━─━─━─━─━─━─━─━╮\n`;
      formattedResult += `┃ 🌐 *Powered by SAMSUNG_MD* ┃\n`;
      formattedResult += `╰━─━─━─━─━─━─━─━─━─━╯ `;

      await m.reply(formattedResult);
      await m.React("✅");
    } catch (error) {
      console.error(error);
      await m.React("❌");
      return m.reply(`❌ *An error occurred while processing your request.*\n\n📋 *Details:* ${error.message}`);
    }
  }
};

export default cricketScore;

