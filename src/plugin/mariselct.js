















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































import config from '../../config.cjs';
import axios from 'axios';

const cricketScore = async (m, Matrix) => {
  const prefix = config.PREFIX;
  const cmd = m.body.startsWith(prefix)
    ? m.body.slice(prefix.length).split(' ')[0].toLowerCase()
    : '';
  const text = m.body.slice(prefix.length + cmd.length).trim();

  const validCommands = ['score', 'crick', 'crickterscore', 'cricket'];

  if (validCommands.includes(cmd)) {
    if (!text) {
      await m.React("âŒ");
      return m.reply(`*ğŸ Please provide a match ID for the cricket score.*\n\nğŸ“Œ *Example:* ${prefix}cricketscore 12345`);
    }

    const matchId = encodeURIComponent(text);

    try {
      const apiUrl = `https://iol.apinepdev.workers.dev/${matchId}`;
      const response = await axios.get(apiUrl);

      if (!response.status === 200) {
        await m.React("âŒ");
        return m.reply(`Invalid response from the cricket score API. Status code: ${response.status}`);
      }

      const result = response.data;

      // Decorative Borders and Styled Output
      let formattedResult = `â•­â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â•®\n`;
      formattedResult += `â”ƒ ğŸŒŸ   *SAMSUNG_MD*   ğŸŒŸ â”ƒ\n`;
      formattedResult += `â”ƒ ğŸ“º *LIVE MATCH SCORE* â”ƒ\n`;
      formattedResult += `â•°â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â•¯\n\n`;

      if (result.code === 200) {
        formattedResult += `ğŸ“Œ *Match Title:*  
        ğŸ”¹ ${result.data.title}\n\n`;
        formattedResult += `ğŸ“Œ *Latest Update:*  
        ğŸ”¹ ${result.data.update}\n\n`;
      } else {
        await m.reply(`*âš ï¸ Update:* No data found for the specified match ID.`);
        await m.React("âŒ");
        return;
      }

      if (result.data.liveScore && result.data.liveScore.toLowerCase() !== "data not found") {
        formattedResult += `ğŸ *Live Score:*  
        ğŸ”¹ ${result.data.liveScore}\n\n`;
        formattedResult += `ğŸ“Š *Run Rate:*  
        ğŸ”¹ ${result.data.runRate}\n\n`;

        // Batsmen Details
        formattedResult += `ğŸ *Batsmen at Crease:*\n`;
        formattedResult += `   ğŸŒï¸ *${result.data.batsmanOne}*  
           â¤ ${result.data.batsmanOneRun} runs (${result.data.batsmanOneBall} balls)  
           â¤ *SR:* ${result.data.batsmanOneSR}\n`;
        formattedResult += `   ğŸŒï¸ *${result.data.batsmanTwo}*  
           â¤ ${result.data.batsmanTwoRun} runs (${result.data.batsmanTwoBall} balls)  
           â¤ *SR:* ${result.data.batsmanTwoSR}\n\n`;

        // Bowlers Details
        formattedResult += `ğŸ¯ *Bowler in Action:*\n`;
        formattedResult += `   ğŸ³ *${result.data.bowlerOne}*  
           â¤ ${result.data.bowlerOneOver} overs, ${result.data.bowlerOneRun} runs, ${result.data.bowlerOneWickets} wickets  
           â¤ *Economy:* ${result.data.bowlerOneEconomy}\n`;
        formattedResult += `   ğŸ³ *${result.data.bowlerTwo}*  
           â¤ ${result.data.bowlerTwoOver} overs, ${result.data.bowlerTwoRun} runs, ${result.data.bowlerTwoWicket} wickets  
           â¤ *Economy:* ${result.data.bowlerTwoEconomy}\n`;
      }

      // Footer
      formattedResult += `\nâ•­â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â•®\n`;
      formattedResult += `â”ƒ ğŸŒ *Powered by SAMSUNG_MD* â”ƒ\n`;
      formattedResult += `â•°â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â”€â”â•¯ `;

      await m.reply(formattedResult);
      await m.React("âœ…");
    } catch (error) {
      console.error(error);
      await m.React("âŒ");
      return m.reply(`âŒ *An error occurred while processing your request.*\n\nğŸ“‹ *Details:* ${error.message}`);
    }
  }
};

export default cricketScore;

